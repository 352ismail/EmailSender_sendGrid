document.addEventListener("DOMContentLoaded", function() {
    const sendEmailButton = document.getElementById("sendEmailButton");

    sendEmailButton.addEventListener("click", async function() {
        try {
            var apikey = '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';
            var fromEmail = '352ismailkhan@gmail.com';//this will change to iktheprogrammer@gmai.com
            var toEmail = 'ismail@trailfive.com';
            var Subject = 'Message From Portfolio';
            var message = 'Message From Var';
            var email = 'Email From Var';
            var name = 'Name from Var ';
            var Text = `<!DOCTYPE HTML PUBLIC \"-\/\/W3C\/\/DTD XHTML 1.0 Transitional \/\/EN\" \"http:\/\/www.w3.org\/TR\/xhtml1\/DTD\/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http:\/\/www.w3.org\/1999\/xhtml\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:o=\"urn:schemas-microsoft-com:office:office\">\r\n<head>\r\n<!--[if gte mso 9]>\r\n<xml>\r\n  <o:OfficeDocumentSettings>\r\n    <o:AllowPNG\/>\r\n    <o:PixelsPerInch>96<\/o:PixelsPerInch>\r\n  <\/o:OfficeDocumentSettings>\r\n<\/xml>\r\n<![endif]-->\r\n  <meta http-equiv=\"Content-Type\" content=\"text\/html; charset=UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <meta name=\"x-apple-disable-message-reformatting\">\r\n  <!--[if !mso]><!--><meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\"><!--<![endif]-->\r\n  <title><\/title>\r\n  \r\n    <style type=\"text\/css\">\r\n      @media only screen and (min-width: 620px) {\r\n  .u-row {\r\n    width: 600px !important;\r\n  }\r\n  .u-row .u-col {\r\n    vertical-align: top;\r\n  }\r\n\r\n  .u-row .u-col-100 {\r\n    width: 600px !important;\r\n  }\r\n\r\n}\r\n\r\n@media (max-width: 620px) {\r\n  .u-row-container {\r\n    max-width: 100% !important;\r\n    padding-left: 0px !important;\r\n    padding-right: 0px !important;\r\n  }\r\n  .u-row .u-col {\r\n    min-width: 320px !important;\r\n    max-width: 100% !important;\r\n    display: block !important;\r\n  }\r\n  .u-row {\r\n    width: 100% !important;\r\n  }\r\n  .u-col {\r\n    width: 100% !important;\r\n  }\r\n  .u-col > div {\r\n    margin: 0 auto;\r\n  }\r\n}\r\nbody {\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\ntable,\r\ntr,\r\ntd {\r\n  vertical-align: top;\r\n  border-collapse: collapse;\r\n}\r\n\r\np {\r\n  margin: 0;\r\n}\r\n\r\n.ie-container table,\r\n.mso-container table {\r\n  table-layout: fixed;\r\n}\r\n\r\n* {\r\n  line-height: inherit;\r\n}\r\n\r\na[x-apple-data-detectors='true'] {\r\n  color: inherit !important;\r\n  text-decoration: none !important;\r\n}\r\n\r\ntable, td { color: #000000; } @media (max-width: 480px) { #u_content_text_4 .v-container-padding-padding { padding: 60px 10px 10px !important; } }\r\n    <\/style>\r\n  \r\n  \r\n\r\n<!--[if !mso]><!--><link href=\"https:\/\/fonts.googleapis.com\/css?family=Raleway:400,700&display=swap\" rel=\"stylesheet\" type=\"text\/css\"><!--<![endif]-->\r\n\r\n<\/head>\r\n\r\n<body class=\"clean-body u_body\" style=\"margin: 0;padding: 0;-webkit-text-size-adjust: 100%;background-color: #000325;color: #000000\">\r\n  <!--[if IE]><div class=\"ie-container\"><![endif]-->\r\n  <!--[if mso]><div class=\"mso-container\"><![endif]-->\r\n  <table style=\"border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;min-width: 320px;Margin: 0 auto;background-color: #000325;width:100%\" cellpadding=\"0\" cellspacing=\"0\">\r\n  <tbody>\r\n  <tr style=\"vertical-align: top\">\r\n    <td style=\"word-break: break-word;border-collapse: collapse !important;vertical-align: top\">\r\n    <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td align=\"center\" style=\"background-color: #000325;\"><![endif]-->\r\n    \r\n  \r\n  \r\n    <!--[if gte mso 9]>\r\n      <table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"margin: 0 auto;min-width: 320px;max-width: 600px;\">\r\n        <tr>\r\n          <td background=\"https:\/\/cdn.templates.unlayer.com\/assets\/1689839013622-Group%203.png\" valign=\"top\" width=\"100%\">\r\n      <v:rect xmlns:v=\"urn:schemas-microsoft-com:vml\" fill=\"true\" stroke=\"false\" style=\"width: 600px;\">\r\n        <v:fill type=\"frame\" src=\"https:\/\/cdn.templates.unlayer.com\/assets\/1689839013622-Group%203.png\" \/><v:textbox style=\"mso-fit-shape-to-text:true\" inset=\"0,0,0,0\">\r\n      <![endif]-->\r\n  \r\n<div class=\"u-row-container\" style=\"padding: 0px;background-image: url('images\/image-1.png');background-repeat: no-repeat;background-position: center top;background-color: transparent\">\r\n  <div class=\"u-row\" style=\"margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: transparent;\">\r\n    <div style=\"border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;\">\r\n      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-image: url('images\/image-1.png');background-repeat: no-repeat;background-position: center top;background-color: transparent;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: transparent;\"><![endif]-->\r\n      \r\n<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" style=\"width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\" valign=\"top\"><![endif]-->\r\n<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">\r\n  <div style=\"height: 100%;width: 100% !important;\">\r\n  <!--[if (!mso)&(!IE)]><!--><div style=\"box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;\"><!--<![endif]-->\r\n  \r\n<table id=\"u_content_text_4\" style=\"font-family:'Raleway',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">\r\n  <tbody>\r\n    <tr>\r\n      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:60px 50px 33px;font-family:'Raleway',sans-serif;\" align=\"left\">\r\n        \r\n  <div style=\"font-size: 14px; color: #ffffff; line-height: 140%; text-align: justify; word-wrap: break-word;\">\r\n    <p style=\"line-height: 140%; font-size: 14px;\"><span style=\"font-family: Raleway, sans-serif; font-size: 16px; line-height: 22.4px;\"><strong>Hey Ismail Khan!<\/strong><\/span><\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\">\u00A0<\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\"><span style=\"font-size: 16px; line-height: 22.4px;\"><span style=\"line-height: 19.6px;\">\u00A0From: ${email},<\/span><\/span><\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\"><span style=\"font-size: 16px; line-height: 22.4px;\"><span style=\"line-height: 19.6px;\">\u00A0${name} Says:<\/span><\/span><em><span style=\"font-size: 16px; line-height: 22.4px;\"><span style=\"line-height: 19.6px;\"><\/span><strong><span style=\"line-height: 19.6px;\"><br \/><\/span><\/strong><\/span><\/em><span style=\"font-size: 16px; line-height: 22.4px;\"><span style=\"line-height: 19.6px;\"><\/span><\/span><\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\">\u00A0<\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\"><span style=\"font-family: Raleway, sans-serif; font-size: 16px; line-height: 22.4px;\">${message}<\/span><\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\">\u00A0<\/p>\r\n<p style=\"line-height: 140%; font-size: 14px;\"><span style=\"font-size: 14px; line-height: 19.6px;\"><strong><span style=\"font-family: Raleway, sans-serif; font-size: 14px; line-height: 19.6px;\">Have a great day<\/span><\/strong><\/span><\/p>\r\n  <\/div>\r\n\r\n      <\/td>\r\n    <\/tr>\r\n  <\/tbody>\r\n<\/table>\r\n\r\n  <!--[if (!mso)&(!IE)]><!--><\/div><!--<![endif]-->\r\n  <\/div>\r\n<\/div>\r\n<!--[if (mso)|(IE)]><\/td><![endif]-->\r\n      <!--[if (mso)|(IE)]><\/tr><\/table><\/td><\/tr><\/table><![endif]-->\r\n    <\/div>\r\n  <\/div>\r\n  <\/div>\r\n  \r\n    <!--[if gte mso 9]>\r\n      <\/v:textbox><\/v:rect>\r\n    <\/td>\r\n    <\/tr>\r\n    <\/table>\r\n    <![endif]-->\r\n    \r\n\r\n\r\n  \r\n  \r\n<div class=\"u-row-container\" style=\"padding: 0px;background-color: transparent\">\r\n  <div class=\"u-row\" style=\"margin: 0 auto;min-width: 320px;max-width: 600px;overflow-wrap: break-word;word-wrap: break-word;word-break: break-word;background-color: transparent;\">\r\n    <div style=\"border-collapse: collapse;display: table;width: 100%;height: 100%;background-color: transparent;\">\r\n      <!--[if (mso)|(IE)]><table width=\"100%\" cellpadding=\"0\" cellspacing=\"0\" border=\"0\"><tr><td style=\"padding: 0px;background-color: transparent;\" align=\"center\"><table cellpadding=\"0\" cellspacing=\"0\" border=\"0\" style=\"width:600px;\"><tr style=\"background-color: transparent;\"><![endif]-->\r\n      \r\n<!--[if (mso)|(IE)]><td align=\"center\" width=\"600\" style=\"background-color: #1c132c;width: 600px;padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;border-radius: 0px;-webkit-border-radius: 0px; -moz-border-radius: 0px;\" valign=\"top\"><![endif]-->\r\n<div class=\"u-col u-col-100\" style=\"max-width: 320px;min-width: 600px;display: table-cell;vertical-align: top;\">\r\n  <div style=\"background-color: #1c132c;height: 100%;width: 100% !important;border-radius: 0px;-webkit-border-radius: 0px; -moz-border-radius: 0px;\">\r\n  <!--[if (!mso)&(!IE)]><!--><div style=\"box-sizing: border-box; height: 100%; padding: 0px;border-top: 0px solid transparent;border-left: 0px solid transparent;border-right: 0px solid transparent;border-bottom: 0px solid transparent;border-radius: 0px;-webkit-border-radius: 0px; -moz-border-radius: 0px;\"><!--<![endif]-->\r\n  \r\n<table style=\"font-family:'Raleway',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">\r\n  <tbody>\r\n    <tr>\r\n      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:20px 0px;font-family:'Raleway',sans-serif;\" align=\"left\">\r\n        \r\n  <table height=\"0px\" align=\"center\" border=\"0\" cellpadding=\"0\" cellspacing=\"0\" width=\"47%\" style=\"border-collapse: collapse;table-layout: fixed;border-spacing: 0;mso-table-lspace: 0pt;mso-table-rspace: 0pt;vertical-align: top;border-top: 1px solid #BBBBBB;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">\r\n    <tbody>\r\n      <tr style=\"vertical-align: top\">\r\n        <td style=\"word-break: break-word;border-collapse: collapse !important;vertical-align: top;font-size: 0px;line-height: 0px;mso-line-height-rule: exactly;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%\">\r\n          <span>&#160;<\/span>\r\n        <\/td>\r\n      <\/tr>\r\n    <\/tbody>\r\n  <\/table>\r\n\r\n      <\/td>\r\n    <\/tr>\r\n  <\/tbody>\r\n<\/table>\r\n\r\n<table style=\"font-family:'Raleway',sans-serif;\" role=\"presentation\" cellpadding=\"0\" cellspacing=\"0\" width=\"100%\" border=\"0\">\r\n  <tbody>\r\n    <tr>\r\n      <td class=\"v-container-padding-padding\" style=\"overflow-wrap:break-word;word-break:break-word;padding:10px 10px 50px;font-family:'Raleway',sans-serif;\" align=\"left\">\r\n        \r\n  <div style=\"font-size: 14px; color: #ffffff; line-height: 160%; text-align: center; word-wrap: break-word;\">\r\n    <p style=\"font-size: 14px; line-height: 160%;\">\u00A0<\/p>\r\n<p style=\"font-size: 14px; line-height: 160%;\">\u00A0<\/p>\r\n<p style=\"font-size: 14px; line-height: 160%;\">All rights reserved<\/p>\r\n  <\/div>\r\n\r\n      <\/td>\r\n    <\/tr>\r\n  <\/tbody>\r\n<\/table>\r\n\r\n  <!--[if (!mso)&(!IE)]><!--><\/div><!--<![endif]-->\r\n  <\/div>\r\n<\/div>\r\n<!--[if (mso)|(IE)]><\/td><![endif]-->\r\n      <!--[if (mso)|(IE)]><\/tr><\/table><\/td><\/tr><\/table><![endif]-->\r\n    <\/div>\r\n  <\/div>\r\n  <\/div>\r\n  \r\n\r\n\r\n    <!--[if (mso)|(IE)]><\/td><\/tr><\/table><![endif]-->\r\n    <\/td>\r\n  <\/tr>\r\n  <\/tbody>\r\n  <\/table>\r\n  <!--[if mso]><\/div><![endif]-->\r\n  <!--[if IE]><\/div><![endif]-->\r\n<\/body>\r\n\r\n<\/html>\r\n`;
            var type = 'text/html'
            const emailData = {
                "personalizations": [
                  {
                    "to": [
                      {
                        "email": toEmail
                      }
                    ],
                    "subject": Subject
                  }
                ],
                "from": {
                  "email": fromEmail
                },
                "content": [
                  {
                    "type": type,
                    "value": Text
                  }
                ]
              }
            const payload = JSON.stringify(emailData);
            const contentLength = new TextEncoder().encode(payload).length;
            const response = await fetch("https://api.sendgrid.com/v3/mail/send", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": "Bearer " + apikey,
                    "Accept":"*/*",
                    "Connection":"keep-alive",
                    "Content-Length": contentLength,
                    "Host": "github.com"
                },
                body: JSON.stringify()
            });

            if (response.ok) {
                alert("Email sent successfully!");
            } else {
                alert("Failed to send email.");
            }
        } catch (error) {
            console.error("Error sending email:", error);
        }
    });
});
